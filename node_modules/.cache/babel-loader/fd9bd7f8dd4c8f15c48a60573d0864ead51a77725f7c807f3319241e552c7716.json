{"ast":null,"code":"import _slicedToArray from\"D:/Downloads/Computer-science/MyProject/react-pizza/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from'react';import{useDispatch}from'react-redux';import{SortPropertyEnum}from'../redux/filter/types';import{setSort}from'../redux/filter/slice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var listPopup=[{name:'популярности (DESC)',sortProperty:SortPropertyEnum.RATING_DESC},{name:'популярности (ASC)',sortProperty:SortPropertyEnum.RATING_ASC},{name:'цене (DESC)',sortProperty:SortPropertyEnum.PRICE_DESC},{name:'цене (ASC)',sortProperty:SortPropertyEnum.PRICE_ASC},{name:'алфавиту (DESC)',sortProperty:SortPropertyEnum.TITLE_DESC},{name:'алфавиту (ASC)',sortProperty:SortPropertyEnum.TITLE_ASC}];export var Sort=/*#__PURE__*/React.memo(function(_ref){var value=_ref.value;var dispatch=useDispatch();var sortRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openPopup=_useState2[0],setOpenPopup=_useState2[1];var onClickPopup=function onClickPopup(obj){dispatch(setSort(obj));setOpenPopup(false);};useEffect(function(){var handleClickOutside=function handleClickOutside(event){var _event=event;if(sortRef.current&&!_event.path.includes(sortRef.current)){setOpenPopup(false);}};document.body.addEventListener('click',handleClickOutside);return function(){return document.body.removeEventListener('click',handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"div\",{ref:sortRef,className:\"sort\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sort__label\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"10\",height:\"6\",viewBox:\"0 0 10 6\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\",fill:\"#2C2C2C\"})}),/*#__PURE__*/_jsx(\"b\",{children:\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u043F\\u043E:\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setOpenPopup(!openPopup);},children:value.name})]}),openPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"sort__popup\",children:/*#__PURE__*/_jsx(\"ul\",{children:listPopup.map(function(obj,i){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return onClickPopup(obj);},className:value.sortProperty===obj.sortProperty?'active':'',children:obj.name},i);})})})]});});Sort.displayName='SortPopup';","map":{"version":3,"names":["React","useState","useRef","useEffect","useDispatch","SortPropertyEnum","setSort","listPopup","name","sortProperty","RATING_DESC","RATING_ASC","PRICE_DESC","PRICE_ASC","TITLE_DESC","TITLE_ASC","Sort","memo","value","dispatch","sortRef","openPopup","setOpenPopup","onClickPopup","obj","handleClickOutside","event","_event","current","path","includes","document","body","addEventListener","removeEventListener","map","i","displayName"],"sources":["D:/Downloads/Computer-science/MyProject/react-pizza/src/components/SortPopup.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\n\nimport { useDispatch } from 'react-redux'\nimport { SortPropertyEnum, Sort as SortType } from '../redux/filter/types'\nimport { setSort } from '../redux/filter/slice'\n\ntype SortItem = {\n    name: string\n    sortProperty: SortPropertyEnum\n}\n\ntype PopupClick = MouseEvent & {\n    path: Node[]\n}\n\nexport const listPopup: SortItem[] = [\n    { name: 'популярности (DESC)', sortProperty: SortPropertyEnum.RATING_DESC },\n    { name: 'популярности (ASC)', sortProperty: SortPropertyEnum.RATING_ASC },\n    { name: 'цене (DESC)', sortProperty: SortPropertyEnum.PRICE_DESC },\n    { name: 'цене (ASC)', sortProperty: SortPropertyEnum.PRICE_ASC },\n    { name: 'алфавиту (DESC)', sortProperty: SortPropertyEnum.TITLE_DESC },\n    { name: 'алфавиту (ASC)', sortProperty: SortPropertyEnum.TITLE_ASC },\n]\n\ntype SortPopupProps = {\n    value: SortType\n}\n\nexport const Sort: React.FC<SortPopupProps> = React.memo(({ value }) => {\n    const dispatch = useDispatch()\n    const sortRef = useRef<HTMLDivElement>(null)\n\n    const [openPopup, setOpenPopup] = useState(false)\n\n    const onClickPopup = (obj: SortItem) => {\n        dispatch(setSort(obj))\n        setOpenPopup(false)\n    }\n\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            const _event = event as PopupClick\n            if (sortRef.current && !_event.path.includes(sortRef.current)) {\n                setOpenPopup(false)\n            }\n        }\n        document.body.addEventListener('click', handleClickOutside)\n\n        return () => document.body.removeEventListener('click', handleClickOutside)\n    }, [])\n\n    return (\n        <div ref={sortRef} className='sort'>\n            <div className='sort__label'>\n                <svg\n                    width='10'\n                    height='6'\n                    viewBox='0 0 10 6'\n                    fill='none'\n                    xmlns='http://www.w3.org/2000/svg'\n                >\n                    <path\n                        d='M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z'\n                        fill='#2C2C2C'\n                    />\n                </svg>\n                <b>Сортировка по:</b>\n                <span onClick={() => setOpenPopup(!openPopup)}>{value.name}</span>\n            </div>\n            {openPopup && (\n                <div className='sort__popup'>\n                    <ul>\n                        {listPopup.map((obj, i) => (\n                            <li\n                                key={i}\n                                onClick={() => onClickPopup(obj)}\n                                className={value.sortProperty === obj.sortProperty ? 'active' : ''}\n                            >\n                                {obj.name}\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n            )}\n        </div>\n    )\n})\n\nSort.displayName = 'SortPopup'\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}